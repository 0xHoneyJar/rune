{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://sigil.dev/schemas/physics.schema.json",
  "title": "Sigil Physics Schema",
  "description": "Defines motion timing, easing, and sync strategies for Sigil v4.1",
  "type": "object",
  "required": ["version", "motions", "sync_strategies", "constraints", "defaults"],
  "properties": {
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Schema version"
    },
    "motions": {
      "type": "object",
      "description": "Map of motion name to motion configuration",
      "additionalProperties": {
        "$ref": "#/definitions/Motion"
      },
      "propertyNames": {
        "enum": ["instant", "snappy", "warm", "deliberate", "reassuring", "celebratory", "reduced"]
      }
    },
    "sync_strategies": {
      "type": "object",
      "description": "Map of sync strategy name to configuration",
      "additionalProperties": {
        "$ref": "#/definitions/SyncStrategy"
      },
      "propertyNames": {
        "enum": ["pessimistic", "optimistic", "hybrid"]
      }
    },
    "constraints": {
      "type": "object",
      "description": "Timing constraints for ESLint zone-compliance rule",
      "additionalProperties": {
        "$ref": "#/definitions/TimingConstraint"
      }
    },
    "defaults": {
      "$ref": "#/definitions/Defaults",
      "description": "Fallback values when physics.yaml is unavailable"
    }
  },
  "definitions": {
    "Motion": {
      "type": "object",
      "required": ["description", "duration", "unit", "easing"],
      "properties": {
        "description": {
          "type": "string",
          "description": "Human-readable explanation of when to use this motion"
        },
        "duration": {
          "oneOf": [
            {
              "type": "object",
              "required": ["value"],
              "properties": {
                "value": {
                  "type": "number",
                  "minimum": 0,
                  "description": "Fixed duration value"
                }
              },
              "additionalProperties": false
            },
            {
              "type": "object",
              "required": ["min", "max", "default"],
              "properties": {
                "min": {
                  "type": "number",
                  "minimum": 0,
                  "description": "Minimum duration value"
                },
                "max": {
                  "type": "number",
                  "minimum": 0,
                  "description": "Maximum duration value"
                },
                "default": {
                  "type": "number",
                  "minimum": 0,
                  "description": "Default duration value"
                }
              },
              "additionalProperties": false
            }
          ],
          "description": "Duration configuration (fixed value or range)"
        },
        "unit": {
          "type": "string",
          "enum": ["ms"],
          "description": "Time unit (always milliseconds)"
        },
        "easing": {
          "type": "string",
          "description": "CSS easing string (e.g., 'ease-out', 'cubic-bezier(...)')"
        },
        "use_cases": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Example use cases for this motion"
        },
        "zones": {
          "type": "object",
          "properties": {
            "prefer": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Zones where this motion is preferred"
            },
            "avoid": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Zones where this motion should be avoided"
            }
          },
          "description": "Zone preferences for this motion"
        },
        "accessibility": {
          "type": "boolean",
          "description": "Whether this motion is for accessibility (reduced motion)"
        }
      }
    },
    "SyncStrategy": {
      "type": "object",
      "required": ["description", "characteristics", "default_motion"],
      "properties": {
        "description": {
          "type": "string",
          "description": "Human-readable explanation of this sync strategy"
        },
        "characteristics": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Key characteristics of this strategy"
        },
        "default_motion": {
          "type": "string",
          "enum": ["instant", "snappy", "warm", "deliberate", "reassuring", "celebratory", "reduced"],
          "description": "Default motion type for this strategy"
        },
        "zones": {
          "type": "object",
          "properties": {
            "prefer": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Zones where this strategy is preferred"
            },
            "avoid": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "Zones where this strategy should be avoided"
            }
          },
          "description": "Zone preferences for this strategy"
        },
        "example": {
          "type": "string",
          "description": "Code example showing usage"
        }
      }
    },
    "TimingConstraint": {
      "type": "object",
      "required": ["min", "max"],
      "properties": {
        "min": {
          "type": "number",
          "minimum": 0,
          "description": "Minimum allowed timing in milliseconds"
        },
        "max": {
          "type": "number",
          "minimum": 0,
          "description": "Maximum allowed timing in milliseconds"
        }
      },
      "additionalProperties": false
    },
    "Defaults": {
      "type": "object",
      "required": ["motion", "sync", "easing", "timing"],
      "properties": {
        "motion": {
          "type": "string",
          "enum": ["instant", "snappy", "warm", "deliberate", "reassuring", "celebratory", "reduced"],
          "description": "Default motion name"
        },
        "sync": {
          "type": "string",
          "enum": ["pessimistic", "optimistic", "hybrid"],
          "description": "Default sync strategy"
        },
        "easing": {
          "type": "string",
          "description": "Default CSS easing string"
        },
        "timing": {
          "type": "number",
          "minimum": 0,
          "description": "Default timing in milliseconds"
        }
      },
      "additionalProperties": false
    }
  }
}
