# Sigil Installation Guide

## Prerequisites

### Required

| Tool | Purpose | Install |
|------|---------|---------|
| Claude Code | AI interface | See [claude.ai/code](https://claude.ai/code) |
| yq | YAML parsing | `brew install yq` or `apt install yq` |

### Recommended

| Tool | Purpose | Install |
|------|---------|---------|
| CK | Semantic search | `cargo install ck-search` |
| Git LFS | Large asset storage | `brew install git-lfs` |

## Installation Methods

### Method 1: One-Liner (Recommended)

```bash
# In your product repo
curl -fsSL https://raw.githubusercontent.com/0xHoneyJar/sigil/main/scripts/mount.sh | bash
```

This will:
1. Clone Sigil to `~/.sigil/sigil/`
2. Create `sigil-showcase/` in your repo
3. Symlink skills and commands to `.claude/`
4. Create `.sigil-version.json`
5. Update `.gitignore`

### Method 2: Via Claude Code

```bash
# Start Claude Code in your product repo
claude

# Run mount command
/sigil mount
```

### Method 3: Manual

```bash
# Clone Sigil
git clone https://github.com/0xHoneyJar/sigil.git ~/.sigil/sigil

# In your product repo
mkdir -p sigil-showcase/{moodboards,exports,showcase}
mkdir -p sigil-showcase/moodboards/{features,assets}
mkdir -p .claude/{skills,commands}

# Symlink skills
ln -s ~/.sigil/sigil/.claude/skills/sigil-capturing-taste .claude/skills/
ln -s ~/.sigil/sigil/.claude/skills/sigil-querying .claude/skills/
ln -s ~/.sigil/sigil/.claude/skills/sigil-showcasing .claude/skills/
ln -s ~/.sigil/sigil/.claude/skills/sigil-mounting .claude/skills/

# Symlink commands
ln -s ~/.sigil/sigil/.claude/commands/taste.md .claude/commands/
ln -s ~/.sigil/sigil/.claude/commands/query.md .claude/commands/
ln -s ~/.sigil/sigil/.claude/commands/export.md .claude/commands/
ln -s ~/.sigil/sigil/.claude/commands/showcase.md .claude/commands/
ln -s ~/.sigil/sigil/.claude/commands/mount.md .claude/commands/

# Create version file
echo '{"version": "1.0.0", "mounted_at": "'$(date -u +%Y-%m-%dT%H:%M:%SZ)'"}' > .sigil-version.json

# Update gitignore
echo "# Sigil" >> .gitignore
echo ".claude/skills/sigil-*" >> .gitignore
echo ".claude/commands/sigil-*" >> .gitignore
echo "sigil-showcase/showcase/node_modules/" >> .gitignore
echo "sigil-showcase/showcase/.next/" >> .gitignore
```

## Post-Installation

### Verify Installation

```bash
# Check version file
cat .sigil-version.json

# Check symlinks
ls -la .claude/skills/sigil-*
ls -la .claude/commands/

# Check showcase directory
ls sigil-showcase/
```

### First Capture

```bash
# Start Claude Code
claude

# Capture a component
/sigil taste ClaimButton
```

## Updating Sigil

```bash
# Via Claude Code
/sigil update

# Or manually
cd ~/.sigil/sigil && git pull
```

## Uninstalling

```bash
# Remove symlinks
rm .claude/skills/sigil-*
rm .claude/commands/sigil-*.md

# Remove state (optional)
rm -rf sigil-showcase/
rm .sigil-version.json

# Remove framework (optional)
rm -rf ~/.sigil/
```

## Troubleshooting

### "yq: command not found"

```bash
# macOS
brew install yq

# Ubuntu/Debian
sudo apt install yq

# Or via snap
sudo snap install yq
```

### "CK not found" (optional)

```bash
# Requires Rust/Cargo
cargo install ck-search

# Or use grep fallback (automatic)
```

### Symlink Issues on Windows

Use WSL (Windows Subsystem for Linux) for best experience:

```bash
wsl --install
# Then follow Linux instructions
```

### Permission Denied

```bash
chmod +x ~/.sigil/sigil/scripts/*.sh
```

## Directory Structure After Install

```
your-repo/
├── .claude/
│   ├── skills/
│   │   ├── sigil-capturing-taste -> ~/.sigil/sigil/...
│   │   ├── sigil-querying -> ~/.sigil/sigil/...
│   │   ├── sigil-showcasing -> ~/.sigil/sigil/...
│   │   └── sigil-mounting -> ~/.sigil/sigil/...
│   └── commands/
│       ├── taste.md -> ~/.sigil/sigil/...
│       ├── query.md -> ~/.sigil/sigil/...
│       └── ...
├── sigil-showcase/
│   ├── moodboards/
│   │   ├── product.md        ← Product-level moodboard
│   │   ├── features/         ← Feature-level moodboards
│   │   └── assets/           ← Reference images
│   ├── exports/
│   │   └── components.json   ← Generated by /sigil export
│   └── showcase/             ← Next.js app (optional)
├── .sigil-version.json       ← Version tracking
└── .gitignore                ← Updated with Sigil patterns
```

## Next Steps

1. **Create product moodboard**: Define your north stars in `sigil-showcase/moodboards/product.md`
2. **Capture core loop**: Run `/sigil taste` to identify and capture critical path components
3. **Query your captures**: Use `/sigil query` to find patterns
4. **Set up showcase**: Run `/sigil showcase` to launch visual browser
